// ! function(t) {
//     "use strict";
//     t("a.page-scroll").bind("click", function(a) {
//         var o = t(this);
//         t("html, body").stop().animate({ scrollTop: t(o.attr("href")).offset().top - 50 }, 1250, "easeInOutExpo"), a.preventDefault()
//     }), t("body").scrollspy({ target: ".navbar-fixed-top", offset: 100 }), t(".navbar-collapse ul li a").click(function() { t(".navbar-toggle:visible").click() }), t("#mainNav").affix({ offset: { top: 50 } })
// }(jQuery);
// ! function(t) {
//     "use strict";
//     t("a.page-scroll").bind("click", function(a) {
//             var o = t(this);
//             t("html, body").stop().animate({ scrollTop: t(o.attr("href")).offset().top - 50 }, 1250, "easeInOutExpo"),
//                 a.preventDefault()
//         }),
//         t("body").scrollspy({ target: ".navbar-fixed-top", offset: 100 }),
//         t(".navbar-collapse ul li a").click(function() { t(".navbar-toggle:visible").click() }),
//         t("#mainNav").affix({ offset: { top: 50 } })

//     function SetImage() {

//         var height = $($(".screen")[1])[0].clientHeight;
//         var width = $($(".screen")[1])[0].clientWidth;

//         console.log(height);
//         console.log(width);

//         $(".phoneImage").css({
//             height: height,
//             width: width
//         });
//     }

//     SetImage();
// }(jQuery);



$(document).ready(function() {
    var config = {
        apiKey: "AIzaSyCOVmNIYf_6tuJCXXWdhxTSVaK6GegQvxc",
        authDomain: "groupnow-62582.firebaseapp.com",
        databaseURL: "https://groupnow-62582.firebaseio.com",
        projectId: "groupnow-62582",
        storageBucket: "",
        messagingSenderId: "157104674568"
    };
    firebase.initializeApp(config);
    var name = "";
    var username = "";
    var email = "";
    var password = "";
    var telephone = "";

    $("#signup").on("click", function(event) {
        event.preventDefault();
        name = $("#name").val().trim();
        username = $("#username").val().trim();
        email = $("#email").val().trim();
        password = $("#password").val().trim();
        telephone = $("#telephone").val().trim();
        console.log(name);
        console.log(username);
        console.log(email);
        console.log(password);
        console.log(telephone);
        firebase.database().ref().push({
            name: name,
            username: username,
            email: email,
            password: password,
            telephone: telephone
        });

        const auth = firebase.auth();
        const promise = auth.createUserWithEmailAndPassword(email, password);
        promise.catch(e => console.log(e.message));

        setTimeout(function() { window.location = "index2.html" }, 1000);
    });

    $("#sub").on("click", function() {
        event.preventDefault();

        var place = $("#lugar").text();
        var loc = $("#dire").text();
        var timedate = $("#date").val();

        $("#mytable").append("<tr><td>" + place + "</td><td>" + loc + "</td><td>" + timedate + "</td></tr>");

        var database = firebase.database();

        database.ref().on('value', function(snapshot) {

            var mails = [];
            var names = [];
            var tele  = [];
 
            function pickRandomProperty(obj) {
                var result;
                var count = 0;
                for (var prop in obj)
                    if (Math.random() < 1 / ++count)
                        result = prop;
                return result;
            }

            var data = snapshot.val();

            for (var i = 0; i < 5; i++) {
                var randomProperty = pickRandomProperty(data);
                
                mails[i] = data[randomProperty].email;
                names[i] = data[randomProperty].name;
                tele[i] = data[randomProperty].telephone;

            }
                
                $("#name").text(names[1]);
                $("#email").text(mails[1]);
                $("#tel").text(tele[1]);

                $("#name2").text(names[2]);
                $("#email2").text(mails[2]);
                $("#tel2").text(tele[2]);

                $("#name3").text(names[3]);
                $("#email3").text(mails[3]);
                $("#tel3").text(tele[3]);

                $("#grouptxt").text("Group Now With:");


        });

    });

});
